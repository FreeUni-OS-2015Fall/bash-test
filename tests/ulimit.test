#! /bin/bash

line_num=$($UNDER_TEST -c "ulimit -a" | wc -l)
if [ $line_num -ne 16 ]; then
  >&2 echo "ulimit -a does not output 16 lines"
  exit 1
fi

flags=( '-q' '-u' '-p' '-s' )
for i in "${flags[@]}"
do
  ulimit_res=$($UNDER_TEST -c "ulimit $i")
  if [ -z "$ulimit_res" ]; then
    >&2 echo "ulimit $i value empty"
    exit 1
  fi
done

exit 0
